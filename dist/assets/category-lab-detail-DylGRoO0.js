import{k as A,P as E,al as k,r as g,q as B,o as i,f as _,w as e,d as a,am as I,c as M,M as v,a2 as w,b as p,u as f,t as x}from"./index-DCsPtwhx.js";import{a as V}from"./axios-B6xwUs71.js";import{a as c,V as h}from"./VRow-BQMg7gci.js";import{V as P}from"./VCard-CQGqZZlO.js";import{V as C}from"./VGrid-CNtzL7sO.js";import{V as N}from"./VForm-Cf02CkQH.js";import{V as O}from"./VTextField-9r9q975_.js";import{V as T}from"./VSwitch-Ds4-Bg5j.js";import{V as S}from"./VAlert-Cp1LBsWb.js";import"./VCardTitle-COZctO8-.js";import"./VImg-qC2UDgjV.js";import"./index-B2lw2hcK.js";import"./VSelectionControl-hvyZhp-8.js";const j={key:0,class:"text-red-500 text-sm"},z={__name:"CategoryLabDetailUpsert",setup(R){const m=A();E();const u=localStorage.getItem("id"),o=k({name:"",is_active:0}),s=k({}),y=localStorage.getItem("token"),d=g(""),l=g("");g([]);const $=async r=>{try{const t=await V.get(`https://gateway.berkompeten.com/api/admin/master/category-lab/detail?id=${r}`,{headers:{Authorization:`Bearer ${y}`}});Object.assign(o,t.data.data)}catch(t){console.error("Error fetching category lab data:",t)}},D=async()=>{try{await V({method:"post",url:"https://gateway.berkompeten.com/api/admin/master/category-lab/upsert",data:o,headers:{Authorization:`Bearer ${y}`}}),d.value="Category lab saved successfully!",setTimeout(()=>{b(),m.push("/category-lab-management")},2e3)}catch(r){console.error("Error submitting form:",r),r.response&&r.response.data?r.response.status===500?l.value=r.response.data.message||"An error occurred while saving. Please try again.":r.response.data.error?(Object.assign(s,r.response.data.message),console.log("ERROR: ",s)):l.value="An error occurred while saving. Please try again.":l.value="An error occurred while saving. Please try again."}},b=()=>{Object.assign(o,{name:"",is_active:0})};return B(()=>{u?$(u):localStorage.removeItem("id")}),(r,t)=>(i(),_(h,null,{default:e(()=>[a(c,{cols:"12"},{default:e(()=>[a(P,{title:"Category Lab Details"},{default:e(()=>[a(C,null,{default:e(()=>[a(N,{onSubmit:I(D,["prevent"])},{default:e(()=>[a(h,null,{default:e(()=>[a(c,{cols:"12"},{default:e(()=>[a(O,{modelValue:o.name,"onUpdate:modelValue":t[0]||(t[0]=n=>o.name=n),"error-messages":s.name,label:"Name"},null,8,["modelValue","error-messages"])]),_:1}),a(c,{cols:"12"},{default:e(()=>[a(T,{color:"#0080ff",modelValue:o.is_active,"onUpdate:modelValue":t[1]||(t[1]=n=>o.is_active=n),"error-messages":s.is_active,label:"Is Active"},null,8,["modelValue","error-messages"]),s.image_url?(i(),M("div",j)):v("",!0)]),_:1}),a(c,{cols:"12",class:"d-flex flex-wrap gap-4"},{default:e(()=>[a(w,{type:"submit",color:"#0080ff"},{default:e(()=>[p("Save")]),_:1}),a(w,{onClick:b,color:"secondary",variant:"outlined"},{default:e(()=>[p("Reset")]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),a(C,null,{default:e(()=>[f(d)?(i(),_(S,{key:0,type:"success",dismissible:"","onClick:close":t[2]||(t[2]=n=>d.value="")},{default:e(()=>[p(x(f(d)),1)]),_:1})):v("",!0),f(l)?(i(),_(S,{key:1,type:"error",dismissible:"","onClick:close":t[3]||(t[3]=n=>l.value="")},{default:e(()=>[p(x(f(l)),1)]),_:1})):v("",!0)]),_:1})]),_:1})]),_:1})]),_:1}))}},ee={__name:"category-lab-detail",setup(R){const m=localStorage.getItem("token"),u=g(null),o=A();return B(async()=>{if(m)try{const s=await V.get("https://gateway.berkompeten.com/api/admin/profile",{headers:{Authorization:`Bearer ${m}`}});u.value=s.data}catch(s){s.response&&s.response.status===401&&o.push("/login")}else o.push("/login")}),(s,y)=>(i(),_(h,{class:"match-height"},{default:e(()=>[a(c,{cols:"12",md:"12"},{default:e(()=>[a(z)]),_:1})]),_:1}))}};export{ee as default};
