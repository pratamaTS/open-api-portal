import{m as ne,V as oe,u as ue,a as $}from"./VOverlay-CqWZXd8P.js";import{f as T,m as ie,a as re,u as se,b as L,c as ce,d as de,e as fe}from"./VTextField-DanCElLj.js";import{p as j,i as U,a3 as Q,r as w,a4 as ve,Q as E,a1 as W,l as p,L as I,j as q,d as r,a5 as me,a6 as pe,a7 as ge,C as ye,a8 as O,a9 as Ve,F as B,aa as he}from"./index-BeDIi-I6.js";import{V as Ce}from"./VChip-BcRfqobc.js";const be=j({fullscreen:Boolean,retainFocus:{type:Boolean,default:!0},scrollable:Boolean,...ne({origin:"center center",scrollStrategy:"block",transition:{component:oe},zIndex:2400})},"VDialog"),ze=U()({name:"VDialog",props:be(),emits:{"update:modelValue":e=>!0},setup(e,y){let{slots:V}=y;const d=Q(e,"modelValue"),{scopeId:n}=ue(),o=w();function l(s){var c,f;const u=s.relatedTarget,i=s.target;if(u!==i&&((c=o.value)!=null&&c.contentEl)&&((f=o.value)!=null&&f.globalTop)&&![document,o.value.contentEl].includes(i)&&!o.value.contentEl.contains(i)){const v=pe(o.value.contentEl);if(!v.length)return;const S=v[0],k=v[v.length-1];u===S?k.focus():S.focus()}}ve&&E(()=>d.value&&e.retainFocus,s=>{s?document.addEventListener("focusin",l):document.removeEventListener("focusin",l)},{immediate:!0}),E(d,async s=>{var u,i;await W(),s?(u=o.value.contentEl)==null||u.focus({preventScroll:!0}):(i=o.value.activatorEl)==null||i.focus({preventScroll:!0})});const h=p(()=>I({"aria-haspopup":"dialog","aria-expanded":String(d.value)},e.activatorProps));return q(()=>{const s=$.filterProps(e);return r($,I({ref:o,class:["v-dialog",{"v-dialog--fullscreen":e.fullscreen,"v-dialog--scrollable":e.scrollable},e.class],style:e.style},s,{modelValue:d.value,"onUpdate:modelValue":u=>d.value=u,"aria-modal":"true",activatorProps:h.value,role:"dialog"},n),{activator:V.activator,default:function(){for(var u=arguments.length,i=new Array(u),c=0;c<u;c++)i[c]=arguments[c];return r(me,{root:"VDialog"},{default:()=>{var f;return[(f=V.default)==null?void 0:f.call(V,...i)]}})}})}),T({},o)}}),Pe=j({chips:Boolean,counter:Boolean,counterSizeString:{type:String,default:"$vuetify.fileInput.counterSize"},counterString:{type:String,default:"$vuetify.fileInput.counter"},multiple:Boolean,showSize:{type:[Boolean,Number],default:!1,validator:e=>typeof e=="boolean"||[1e3,1024].includes(e)},...ie({prependIcon:"$file"}),modelValue:{type:Array,default:()=>[],validator:e=>ge(e).every(y=>y!=null&&typeof y=="object")},...re({clearable:!0})},"VFileInput"),Be=U()({name:"VFileInput",inheritAttrs:!1,props:Pe(),emits:{"click:control":e=>!0,"mousedown:control":e=>!0,"update:focused":e=>!0,"update:modelValue":e=>!0},setup(e,y){let{attrs:V,emit:d,slots:n}=y;const{t:o}=ye(),l=Q(e,"modelValue"),{isFocused:h,focus:s,blur:u}=se(e),i=p(()=>typeof e.showSize!="boolean"?e.showSize:void 0),c=p(()=>(l.value??[]).reduce((t,a)=>{let{size:C=0}=a;return t+C},0)),f=p(()=>O(c.value,i.value)),v=p(()=>(l.value??[]).map(t=>{const{name:a="",size:C=0}=t;return e.showSize?`${a} (${O(C,i.value)})`:a})),S=p(()=>{var a;const t=((a=l.value)==null?void 0:a.length)??0;return e.showSize?o(e.counterSizeString,t,f.value):o(e.counterString,t)}),k=w(),R=w(),g=w(),G=p(()=>h.value||e.active),A=p(()=>["plain","underlined"].includes(e.variant));function z(){var t;g.value!==document.activeElement&&((t=g.value)==null||t.focus()),h.value||s()}function H(t){D(t)}function J(t){d("mousedown:control",t)}function D(t){var a;(a=g.value)==null||a.click(),d("click:control",t)}function K(t){t.stopPropagation(),z(),W(()=>{l.value=[],he(e["onClick:clear"],t)})}return E(l,t=>{(!Array.isArray(t)||!t.length)&&g.value&&(g.value.value="")}),q(()=>{const t=!!(n.counter||e.counter),a=!!(t||n.details),[C,X]=Ve(V),{modelValue:Ie,...Y}=L.filterProps(e),Z=ce(e);return r(L,I({ref:k,modelValue:l.value,"onUpdate:modelValue":b=>l.value=b,class:["v-file-input",{"v-file-input--chips":!!e.chips,"v-input--plain-underlined":A.value},e.class],style:e.style,"onClick:prepend":H},C,Y,{centerAffix:!A.value,focused:h.value}),{...n,default:b=>{let{id:F,isDisabled:P,isDirty:x,isReadonly:M,isValid:_}=b;return r(de,I({ref:R,"prepend-icon":e.prependIcon,onMousedown:J,onClick:D,"onClick:clear":K,"onClick:prependInner":e["onClick:prependInner"],"onClick:appendInner":e["onClick:appendInner"]},Z,{id:F.value,active:G.value||x.value,dirty:x.value,disabled:P.value,focused:h.value,error:_.value===!1}),{...n,default:ee=>{var N;let{props:{class:te,...le}}=ee;return r(B,null,[r("input",I({ref:g,type:"file",readonly:M.value,disabled:P.value,multiple:e.multiple,name:e.name,onClick:m=>{m.stopPropagation(),M.value&&m.preventDefault(),z()},onChange:m=>{if(!m.target)return;const ae=m.target;l.value=[...ae.files??[]]},onFocus:z,onBlur:u},le,X),null),r("div",{class:te},[!!((N=l.value)!=null&&N.length)&&(n.selection?n.selection({fileNames:v.value,totalBytes:c.value,totalBytesReadable:f.value}):e.chips?v.value.map(m=>r(Ce,{key:m,size:"small",color:e.color},{default:()=>[m]})):v.value.join(", "))])])}})},details:a?b=>{var F,P;return r(B,null,[(F=n.details)==null?void 0:F.call(n,b),t&&r(B,null,[r("span",null,null),r(fe,{active:!!((P=l.value)!=null&&P.length),value:S.value},n.counter)])])}:void 0})}),T({},k,R,g)}});export{Be as V,ze as a};
