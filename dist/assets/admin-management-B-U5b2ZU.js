import{a as $}from"./axios-B6xwUs71.js";import{_ as B,k as w,r as s,Q as M,q as I,o as i,c as h,d as r,w as l,b as n,a as e,a2 as v,f as x,t as d,M as y,F as q,s as F,V,S as L,T as Q}from"./index-D2-qfZUC.js";import{V as E}from"./VCardTitle-PXnkOUol.js";import{V as R}from"./VTextField-Ay2s5CCj.js";import{V as C}from"./VAlert-BwkZ1Dg2.js";import{V as z,a as J,b as U}from"./VCardText-DTp4SCLr.js";import{V as Y}from"./VTable-BFNrG0pI.js";import"./VGrid-CFL11Wdl.js";import"./index-G4heg744.js";const Z=p=>(L("data-v-30f1e67a"),p=p(),Q(),p),j={class:"table-header"},G={class:"table-container"},H=Z(()=>e("thead",null,[e("tr",null,[e("th",null,"ID"),e("th",null,"Name"),e("th",null,"Email"),e("th",null,"Is Active"),e("th",null,"Created Date"),e("th",null,"Actions")])],-1)),K={key:0},O={class:"pagination"},W={__name:"AdminList",setup(p){const m=w(),k=localStorage.getItem("token"),b=s([]),c=s("");s(null),s([]);const o=s({current_page:1,from:1,last_page:1,next_page_url:null,prev_page_url:null,total:0});s(!1),s(null);const f=s(""),_=s(""),g=async(u=1,t="")=>{try{b.value=[{name:"Yodu Partner",email:"partner@yodu.id",created_at:"2024-07-01T13:01:55.000000Z",is_active:!0,created_date:"01 July 2024 20:01:55",is_superadmin:!0}],o.value={current_page:1,first_page_url:"https://gateway.berkompeten.com/api/admin/master/admin?page=1",from:1,last_page:1,last_page_url:"https://gateway.berkompeten.com/api/admin/master/admin?page=1",links:[{url:null,label:"&laquo; Previous",active:!1},{url:"https://gateway.berkompeten.com/api/admin/master/admin?page=1",label:"1",active:!0},{url:null,label:"Next &raquo;",active:!1}],next_page_url:null,path:"https://gateway.berkompeten.com/api/admin/master/admin",per_page:10,prev_page_url:null,to:1,total:1}}catch(a){console.log("err: ",a),a.response&&a.response.status===401&&(localStorage.removeItem("token"),m.push("/login"))}};M([c],([u])=>{g(1,u)});const S=()=>{o.value.next_page_url&&g(o.value.current_page+1,c.value)},A=()=>{o.value.prev_page_url&&g(o.value.current_page-1,c.value)},D=()=>{localStorage.removeItem("id"),m.push("/admin/detail")},N=u=>{localStorage.setItem("id",u),m.push("/admin/detail")},P=async u=>{try{const t=await $.delete(`https://gateway.berkompeten.com/api/admin/master/admin?id=${u}`,{headers:{Authorization:`Bearer ${k}`}});f.value=t.data.message,g(o.value.current_page)}catch(t){console.log("err: ",t),t.response&&t.response.data?_.value=t.response.data.message||"An error occurred while deleting. Please try again.":_.value="An error occurred while deleting. Please try again."}};return I(()=>{g()}),(u,t)=>(i(),h("div",null,[r(E,{class:"mb-4"},{default:l(()=>[n("Admin Management")]),_:1}),e("div",j,[r(R,{modelValue:c.value,"onUpdate:modelValue":t[0]||(t[0]=a=>c.value=a),label:"Search",class:"mx-3",solo:""},null,8,["modelValue"]),r(v,{color:"#0080ff",class:"mx-1",onClick:D},{default:l(()=>[n("Create")]),_:1})]),r(z,null,{default:l(()=>[f.value?(i(),x(C,{key:0,type:"success",dismissible:"","onClick:close":t[1]||(t[1]=a=>f.value="")},{default:l(()=>[n(d(f.value),1)]),_:1})):y("",!0),_.value?(i(),x(C,{key:1,type:"error",dismissible:"","onClick:close":t[2]||(t[2]=a=>_.value="")},{default:l(()=>[n(d(_.value),1)]),_:1})):y("",!0)]),_:1}),e("div",G,[r(Y,{"fixed-header":""},{default:l(()=>[H,e("tbody",null,[(i(!0),h(q,null,F(b.value,a=>(i(),h("tr",{key:a.id},[e("td",null,d(a.id),1),e("td",null,d(a.name),1),e("td",null,d(a.email),1),e("td",null,d(a.is_active),1),e("td",null,d(a.created_date),1),e("td",null,[a.is_superadmin?(i(),h("div",K,[r(v,{icon:"",onClick:T=>N(a.id),class:"mx-1",color:"transparent",style:{padding:"0",border:"none","background-color":"transparent","box-shadow":"none"}},{default:l(()=>[r(V,{style:{color:"orange"}},{default:l(()=>[n("ri-edit-line")]),_:1})]),_:2},1032,["onClick"]),r(v,{icon:"",onClick:T=>P(a.id),class:"mx-1",color:"transparent",style:{padding:"0",border:"none","background-color":"transparent","box-shadow":"none"}},{default:l(()=>[r(V,{style:{color:"red"}},{default:l(()=>[n("ri-delete-bin-line")]),_:1})]),_:2},1032,["onClick"])])):y("",!0)])]))),128))])]),_:1})]),e("div",O,[r(v,{onClick:A,disabled:!o.value.prev_page_url,class:"mx-1",color:"#0080ff"},{default:l(()=>[n("Previous")]),_:1},8,["disabled"]),r(v,{onClick:S,disabled:!o.value.next_page_url,class:"mx-1",color:"#0080ff"},{default:l(()=>[n("Next")]),_:1},8,["disabled"])])]))}},X=B(W,[["__scopeId","data-v-30f1e67a"]]),de={__name:"admin-management",setup(p){const m=localStorage.getItem("token");s(null);const k=w();return I(async()=>{m||k.push("/login")}),(b,c)=>(i(),x(J,{class:"match-height"},{default:l(()=>[r(U,{cols:"12",md:"12"},{default:l(()=>[r(X)]),_:1})]),_:1}))}};export{de as default};
