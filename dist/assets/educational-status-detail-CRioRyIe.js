import{k as C,P as D,al as b,r as g,q as E,o as i,f as _,w as e,d as t,am as I,c as M,M as V,a2 as w,b as p,u as f,t as x}from"./index-DCsPtwhx.js";import{a as h}from"./axios-B6xwUs71.js";import{a as u,V as y}from"./VRow-BQMg7gci.js";import{V as P}from"./VCard-CQGqZZlO.js";import{V as S}from"./VGrid-CNtzL7sO.js";import{V as N}from"./VForm-Cf02CkQH.js";import{V as O}from"./VTextField-9r9q975_.js";import{V as T}from"./VSwitch-Ds4-Bg5j.js";import{V as A}from"./VAlert-Cp1LBsWb.js";import"./VCardTitle-COZctO8-.js";import"./VImg-qC2UDgjV.js";import"./index-B2lw2hcK.js";import"./VSelectionControl-hvyZhp-8.js";const j={key:0,class:"text-red-500 text-sm"},z={__name:"EducationalStatusDetailUpsert",setup(B){const c=C();D();const m=localStorage.getItem("id"),r=b({name:"",is_active:0}),s=b({}),v=localStorage.getItem("token"),d=g(""),l=g("");g([]);const R=async o=>{try{const a=await h.get(`https://gateway.berkompeten.com/api/admin/master/educational-status/detail?id=${o}`,{headers:{Authorization:`Bearer ${v}`}});Object.assign(r,a.data.data)}catch(a){console.error("Error fetching educational status data:",a)}},$=async()=>{try{await h({method:"post",url:"https://gateway.berkompeten.com/api/admin/master/educational-status/upsert",data:r,headers:{Authorization:`Bearer ${v}`}}),d.value="Educational Status saved successfully!",setTimeout(()=>{k(),c.push("/educational-status-management")},2e3)}catch(o){console.error("Error submitting form:",o),o.response&&o.response.data?o.response.status===500?l.value=o.response.data.message||"An error occurred while saving. Please try again.":o.response.data.error?(Object.assign(s,o.response.data.message),console.log("ERROR: ",s)):l.value="An error occurred while saving. Please try again.":l.value="An error occurred while saving. Please try again."}},k=()=>{Object.assign(r,{name:"",is_active:0})};return E(()=>{m?R(m):localStorage.removeItem("id")}),(o,a)=>(i(),_(y,null,{default:e(()=>[t(u,{cols:"12"},{default:e(()=>[t(P,{title:"Educationa Status Details"},{default:e(()=>[t(S,null,{default:e(()=>[t(N,{onSubmit:I($,["prevent"])},{default:e(()=>[t(y,null,{default:e(()=>[t(u,{cols:"12"},{default:e(()=>[t(O,{modelValue:r.name,"onUpdate:modelValue":a[0]||(a[0]=n=>r.name=n),"error-messages":s.name,label:"Name"},null,8,["modelValue","error-messages"])]),_:1}),t(u,{cols:"12"},{default:e(()=>[t(T,{color:"#0080ff",modelValue:r.is_active,"onUpdate:modelValue":a[1]||(a[1]=n=>r.is_active=n),"error-messages":s.is_active,label:"Is Active"},null,8,["modelValue","error-messages"]),s.image_url?(i(),M("div",j)):V("",!0)]),_:1}),t(u,{cols:"12",class:"d-flex flex-wrap gap-4"},{default:e(()=>[t(w,{type:"submit",color:"#0080ff"},{default:e(()=>[p("Save")]),_:1}),t(w,{onClick:k,color:"secondary",variant:"outlined"},{default:e(()=>[p("Reset")]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),t(S,null,{default:e(()=>[f(d)?(i(),_(A,{key:0,type:"success",dismissible:"","onClick:close":a[2]||(a[2]=n=>d.value="")},{default:e(()=>[p(x(f(d)),1)]),_:1})):V("",!0),f(l)?(i(),_(A,{key:1,type:"error",dismissible:"","onClick:close":a[3]||(a[3]=n=>l.value="")},{default:e(()=>[p(x(f(l)),1)]),_:1})):V("",!0)]),_:1})]),_:1})]),_:1})]),_:1}))}},ee={__name:"educational-status-detail",setup(B){const c=localStorage.getItem("token"),m=g(null),r=C();return E(async()=>{if(c)try{const s=await h.get("https://gateway.berkompeten.com/api/admin/profile",{headers:{Authorization:`Bearer ${c}`}});m.value=s.data}catch(s){s.response&&s.response.status===401&&r.push("/login")}else r.push("/login")}),(s,v)=>(i(),_(y,{class:"match-height"},{default:e(()=>[t(u,{cols:"12",md:"12"},{default:e(()=>[t(z)]),_:1})]),_:1}))}};export{ee as default};
