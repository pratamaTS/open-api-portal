import{p as S,i as w,l as p,j as Y,d as s,a2 as C,z as Q,a5 as H,an as xe,ao as N,a3 as A,a7 as W,ap as De,r as _,b as T,aq as ue,ag as ce,L as D,aj as me,q as J,a1 as _e,ar as Ce,m as Se,as as we,at as Me,v as Ae,au as Ye,x as Ie,h as Be,y as Te,av as $e,A as ve,aw as Ne,ax as Oe,ay as We,G as je,az as Ee,B as Re,ab as R,C as He,ac as Ue,Q as L,F as Fe,k as ke,P as ze,al as X,o as j,f as E,w as V,am as Le,aA as qe,t as Z,M as ee}from"./index-DCsPtwhx.js";import{a as q}from"./axios-B6xwUs71.js";import{a as $,V as G}from"./VRow-BQMg7gci.js";import{V as Ge}from"./VCard-CQGqZZlO.js";import{c as Qe,V as ae}from"./VGrid-CNtzL7sO.js";import{V as Je}from"./VForm-Cf02CkQH.js";import{V as Ke}from"./VMenu-AzC6IdKP.js";import{i as Xe,V as Ze}from"./VTextField-9r9q975_.js";import{V as ea}from"./VSpacer-gK13XpwC.js";import{M as aa}from"./index-B2lw2hcK.js";import{V as ta}from"./VSwitch-Ds4-Bg5j.js";import{V as te}from"./VAlert-Cp1LBsWb.js";import"./VCardTitle-COZctO8-.js";import"./VImg-qC2UDgjV.js";import"./VOverlay-CSuY4GSz.js";import"./lazy-atWRYZQq.js";import"./VSelectionControl-hvyZhp-8.js";const fe=S({active:{type:[String,Array],default:void 0},disabled:{type:[Boolean,String,Array],default:!1},nextIcon:{type:[String],default:"$next"},prevIcon:{type:[String],default:"$prev"},modeIcon:{type:[String],default:"$subgroup"},text:String,viewMode:{type:String,default:"month"}},"VDatePickerControls"),ne=w()({name:"VDatePickerControls",props:fe(),emits:{"click:year":()=>!0,"click:month":()=>!0,"click:prev":()=>!0,"click:next":()=>!0,"click:text":()=>!0},setup(e,l){let{emit:o}=l;const a=p(()=>Array.isArray(e.disabled)?e.disabled.includes("text"):!!e.disabled),t=p(()=>Array.isArray(e.disabled)?e.disabled.includes("mode"):!!e.disabled),k=p(()=>Array.isArray(e.disabled)?e.disabled.includes("prev"):!!e.disabled),i=p(()=>Array.isArray(e.disabled)?e.disabled.includes("next"):!!e.disabled);function r(){o("click:prev")}function m(){o("click:next")}function d(){o("click:year")}function n(){o("click:month")}return Y(()=>s("div",{class:["v-date-picker-controls"]},[s(C,{class:"v-date-picker-controls__month-btn",disabled:a.value,text:e.text,variant:"text",rounded:!0,onClick:n},null),s(C,{key:"mode-btn",class:"v-date-picker-controls__mode-btn",disabled:t.value,density:"comfortable",icon:e.modeIcon,variant:"text",onClick:d},null),s(ea,{key:"mode-spacer"},null),s("div",{key:"month-buttons",class:"v-date-picker-controls__month"},[s(C,{disabled:k.value,icon:e.prevIcon,variant:"text",onClick:r},null),s(C,{disabled:i.value,icon:e.nextIcon,variant:"text",onClick:m},null)])])),{}}}),na=S({appendIcon:String,color:String,header:String,transition:String,onClick:xe()},"VDatePickerHeader"),le=w()({name:"VDatePickerHeader",props:na(),emits:{click:()=>!0,"click:append":()=>!0},setup(e,l){let{emit:o,slots:a}=l;const{backgroundColorClasses:t,backgroundColorStyles:k}=Q(e,"color");function i(){o("click")}function r(){o("click:append")}return Y(()=>{const m=!!(a.default||e.header),d=!!(a.append||e.appendIcon);return s("div",{class:["v-date-picker-header",{"v-date-picker-header--clickable":!!e.onClick},t.value],style:k.value,onClick:i},[a.prepend&&s("div",{key:"prepend",class:"v-date-picker-header__prepend"},[a.prepend()]),m&&s(aa,{key:"content",name:e.transition},{default:()=>{var n;return[s("div",{key:e.header,class:"v-date-picker-header__content"},[((n=a.default)==null?void 0:n.call(a))??e.header])]}}),d&&s("div",{class:"v-date-picker-header__append"},[a.append?s(H,{key:"append-defaults",disabled:!e.appendIcon,defaults:{VBtn:{icon:e.appendIcon,variant:"text"}}},{default:()=>{var n;return[(n=a.append)==null?void 0:n.call(a)]}}):s(C,{key:"append-btn",icon:e.appendIcon,variant:"text",onClick:r},null)])])}),{}}}),la=S({allowedDates:[Array,Function],disabled:Boolean,displayValue:null,modelValue:Array,month:[Number,String],max:null,min:null,showAdjacentMonths:Boolean,year:[Number,String]},"calendar");function sa(e){const l=N(),o=A(e,"modelValue",[],u=>W(u)),a=p(()=>e.displayValue?l.date(e.displayValue):o.value.length>0?l.date(o.value[0]):e.min?l.date(e.min):Array.isArray(e.allowedDates)?l.date(e.allowedDates[0]):l.date()),t=A(e,"year",void 0,u=>{const v=u!=null?Number(u):l.getYear(a.value);return l.startOfYear(l.setYear(l.date(),v))},u=>l.getYear(u)),k=A(e,"month",void 0,u=>{const v=u!=null?Number(u):l.getMonth(a.value),f=l.setYear(l.date(),l.getYear(t.value));return l.setMonth(f,v)},u=>l.getMonth(u)),i=p(()=>{const u=l.getWeekArray(k.value),v=u.flat(),f=6*7;if(v.length<f){const h=v[v.length-1];let c=[];for(let y=1;y<=f-v.length;y++)c.push(l.addDays(h,y)),y%7===0&&(u.push(c),c=[])}return u}),r=(u,v)=>u.map((f,h)=>{const c=l.toISO(f),y=!l.isSameMonth(f,k.value),B=l.isSameDay(f,l.startOfMonth(k.value)),I=l.isSameDay(f,l.endOfMonth(k.value)),U=l.isSameDay(f,k.value);return{date:f,isoDate:c,formatted:l.format(f,"keyboardDate"),year:l.getYear(f),month:l.getMonth(f),isDisabled:b(f),isWeekStart:h%7===0,isWeekEnd:h%7===6,isToday:l.isSameDay(f,v),isAdjacent:y,isHidden:y&&!e.showAdjacentMonths,isStart:B,isSelected:o.value.some(O=>l.isSameDay(f,O)),isEnd:I,isSame:U,localized:l.format(f,"dayOfMonth")}}),m=p(()=>{const u=l.startOfWeek(o.value),v=[];for(let c=0;c<=6;c++)v.push(l.addDays(u,c));const f=v,h=l.date();return r(f,h)}),d=p(()=>{const u=i.value.flat(),v=l.date();return r(u,v)}),n=p(()=>i.value.map(u=>u.length?De(l,u[0]):null));function b(u){if(e.disabled)return!0;const v=l.date(u);return e.min&&l.isAfter(l.date(e.min),v)||e.max&&l.isAfter(v,l.date(e.max))?!0:Array.isArray(e.allowedDates)&&e.allowedDates.length>0?!e.allowedDates.some(f=>l.isSameDay(l.date(f),v)):typeof e.allowedDates=="function"?!e.allowedDates(v):!1}return{displayValue:a,daysInMonth:d,daysInWeek:m,genDays:r,model:o,weeksInMonth:i,weekNumbers:n}}const he=S({color:String,hideWeekdays:Boolean,multiple:Boolean,showWeek:Boolean,...la()},"VDatePickerMonth"),se=w()({name:"VDatePickerMonth",props:he(),emits:{"update:modelValue":e=>!0,"update:month":e=>!0,"update:year":e=>!0},setup(e,l){let{emit:o,slots:a}=l;const t=_(),{daysInMonth:k,model:i,weekNumbers:r}=sa(e),m=N();function d(n){if(e.multiple){const b=i.value.findIndex(u=>m.isSameDay(u,n));if(b===-1)i.value=[...i.value,n];else{const u=[...i.value];u.splice(b,1),i.value=u}}else i.value=[n]}return()=>s("div",{class:"v-date-picker-month"},[e.showWeek&&s("div",{key:"weeks",class:"v-date-picker-month__weeks"},[!e.hideWeekdays&&s("div",{key:"hide-week-days",class:"v-date-picker-month__day"},[T("Â ")]),r.value.map(n=>s("div",{class:["v-date-picker-month__day","v-date-picker-month__day--adjacent"]},[n]))]),s("div",{ref:t,class:"v-date-picker-month__days"},[!e.hideWeekdays&&m.getWeekdays().map(n=>s("div",{class:["v-date-picker-month__day","v-date-picker-month__weekday"]},[n[0]])),k.value.map((n,b)=>{const u={props:{onClick:()=>d(n.date)},item:n,i:b};return s("div",{class:["v-date-picker-month__day",{"v-date-picker-month__day--adjacent":n.isAdjacent,"v-date-picker-month__day--hide-adjacent":n.isHidden,"v-date-picker-month__day--selected":n.isSelected,"v-date-picker-month__day--week-end":n.isWeekEnd,"v-date-picker-month__day--week-start":n.isWeekStart}],"data-v-date":n.isDisabled?void 0:n.isoDate},[(e.showAdjacentMonths||!n.isAdjacent)&&s(H,{defaults:{VBtn:{color:(n.isSelected||n.isToday)&&!n.isDisabled?e.color:void 0,disabled:n.isDisabled,icon:!0,ripple:!1,text:n.localized,variant:n.isDisabled?"text":n.isToday&&!n.isSelected?"outlined":"flat",onClick:()=>d(n.date)}}},{default:()=>{var v;return[((v=a.day)==null?void 0:v.call(a,u))??s(C,u.props,null)]}})])})])])}}),ye=S({color:String,height:[String,Number],modelValue:Number},"VDatePickerMonths"),re=w()({name:"VDatePickerMonths",props:ye(),emits:{"update:modelValue":e=>!0},setup(e,l){let{slots:o}=l;const a=N(),t=A(e,"modelValue"),k=p(()=>{let i=a.startOfYear(a.date());return ue(12).map(r=>{const m=a.format(i,"monthShort");return i=a.getNextMonth(i),{text:m,value:r}})});return ce(()=>{t.value=t.value??a.getMonth(a.date())}),Y(()=>s("div",{class:"v-date-picker-months",style:{height:me(e.height)}},[s("div",{class:"v-date-picker-months__content"},[k.value.map((i,r)=>{var n;const m={active:t.value===r,color:t.value===r?e.color:void 0,rounded:!0,text:i.text,variant:t.value===i.value?"flat":"text",onClick:()=>d(r)};function d(b){t.value=b}return((n=o.month)==null?void 0:n.call(o,{month:i,i:r,props:m}))??s(C,D({key:"month"},m,{onClick:()=>d(r)}),null)})])])),{}}}),ge=S({color:String,height:[String,Number],min:null,max:null,modelValue:Number},"VDatePickerYears"),oe=w()({name:"VDatePickerYears",props:ge(),emits:{"update:modelValue":e=>!0},setup(e,l){let{slots:o}=l;const a=N(),t=A(e,"modelValue"),k=p(()=>{const r=a.getYear(a.date());let m=r-100,d=r+52;e.min&&(m=a.getYear(a.date(e.min))),e.max&&(d=a.getYear(a.date(e.max)));let n=a.startOfYear(a.date());return n=a.setYear(n,m),ue(d-m+1,m).map(b=>{const u=a.format(n,"year");return n=a.setYear(n,a.getYear(n)+1),{text:u,value:b}})});ce(()=>{t.value=t.value??a.getYear(a.date())});const i=_();return J(async()=>{var r;await _e(),(r=i.value)==null||r.$el.scrollIntoView({block:"center"})}),Y(()=>s("div",{class:"v-date-picker-years",style:{height:me(e.height)}},[s("div",{class:"v-date-picker-years__content"},[k.value.map((r,m)=>{var n;const d={ref:t.value===r.value?i:void 0,active:t.value===r.value,color:t.value===r.value?e.color:void 0,rounded:!0,text:r.text,variant:t.value===r.value?"flat":"text",onClick:()=>t.value=r.value};return((n=o.year)==null?void 0:n.call(o,{year:r,i:m,props:d}))??s(C,D({key:"month"},d),null)})])])),{}}}),ra=Qe("v-picker-title"),Ve=S({color:String,...Ce(),...Se(),...we(),...Me(),...Ae(),...Ye(),...Ie(),...Be(),...Te()},"VSheet"),ie=w()({name:"VSheet",props:Ve(),setup(e,l){let{slots:o}=l;const{themeClasses:a}=$e(e),{backgroundColorClasses:t,backgroundColorStyles:k}=Q(ve(e,"color")),{borderClasses:i}=Ne(e),{dimensionStyles:r}=Oe(e),{elevationClasses:m}=We(e),{locationStyles:d}=je(e),{positionClasses:n}=Ee(e),{roundedClasses:b}=Re(e);return Y(()=>s(e.tag,{class:["v-sheet",a.value,t.value,i.value,m.value,n.value,b.value,e.class],style:[k.value,r.value,d.value,e.style]},o)),{}}}),pe=S({bgColor:String,landscape:Boolean,title:String,hideHeader:Boolean,...Ve()},"VPicker"),de=w()({name:"VPicker",props:pe(),setup(e,l){let{slots:o}=l;const{backgroundColorClasses:a,backgroundColorStyles:t}=Q(ve(e,"color"));return Y(()=>{const k=ie.filterProps(e),i=!!(e.title||o.title);return s(ie,D(k,{color:e.bgColor,class:["v-picker",{"v-picker--landscape":e.landscape,"v-picker--with-actions":!!o.actions},e.class],style:e.style}),{default:()=>{var r;return[!e.hideHeader&&s("div",{key:"header",class:[a.value],style:[t.value]},[i&&s(ra,{key:"picker-title"},{default:()=>{var m;return[((m=o.title)==null?void 0:m.call(o))??e.title]}}),o.header&&s("div",{class:"v-picker__header"},[o.header()])]),s("div",{class:"v-picker__body"},[(r=o.default)==null?void 0:r.call(o)]),o.actions&&s(H,{defaults:{VBtn:{slim:!0,variant:"text"}}},{default:()=>[s("div",{class:"v-picker__actions"},[o.actions()])]})]}})}),{}}}),oa=S({header:{type:String,default:"$vuetify.datePicker.header"},...fe(),...he(),...R(ye(),["modelValue"]),...R(ge(),["modelValue"]),...pe({title:"$vuetify.datePicker.title"}),modelValue:null},"VDatePicker"),ia=w()({name:"VDatePicker",props:oa(),emits:{"update:modelValue":e=>!0,"update:month":e=>!0,"update:year":e=>!0,"update:viewMode":e=>!0},setup(e,l){let{emit:o,slots:a}=l;const t=N(),{t:k}=He(),i=A(e,"modelValue",void 0,g=>W(g),g=>e.multiple?g:g[0]),r=A(e,"viewMode"),m=p(()=>{var x;const g=t.date((x=i.value)==null?void 0:x[0]);return g&&t.isValid(g)?g:t.date()}),d=_(Number(e.month??t.getMonth(t.startOfMonth(m.value)))),n=_(Number(e.year??t.getYear(t.startOfYear(t.setMonth(m.value,d.value))))),b=Ue(!1),u=p(()=>e.multiple&&i.value.length>1?k("$vuetify.datePicker.itemsSelected",i.value.length):i.value[0]&&t.isValid(i.value[0])?t.format(i.value[0],"normalDateWithWeekday"):k(e.header)),v=p(()=>t.format(t.setYear(t.setMonth(t.date(),d.value),n.value),"monthAndYear")),f=p(()=>`date-picker-header${b.value?"-reverse":""}-transition`),h=p(()=>{const g=t.date(e.min);return e.min&&t.isValid(g)?g:null}),c=p(()=>{const g=t.date(e.max);return e.max&&t.isValid(g)?g:null}),y=p(()=>{if(e.disabled)return!0;const g=[];if(r.value!=="month")g.push("prev","next");else{let x=t.date();if(x=t.setYear(x,n.value),x=t.setMonth(x,d.value),h.value){const M=t.addDays(t.startOfMonth(x),-1);t.isAfter(h.value,M)&&g.push("prev")}if(c.value){const M=t.addDays(t.endOfMonth(x),1);t.isAfter(M,c.value)&&g.push("next")}}return g});function B(){d.value<11?d.value++:(n.value++,d.value=0)}function I(){d.value>0?d.value--:(n.value--,d.value=11)}function U(){r.value="month"}function O(){r.value=r.value==="months"?"month":"months"}function K(){r.value=r.value==="year"?"month":"year"}return L(d,()=>{r.value==="months"&&O(),o("update:month",d.value)}),L(n,()=>{r.value==="year"&&K(),o("update:year",n.value)}),L(i,(g,x)=>{const M=t.date(W(g)[0]),F=t.date(W(x)[0]);b.value=t.isBefore(M,F)}),Y(()=>{const g=de.filterProps(e),x=ne.filterProps(e),M=le.filterProps(e),F=se.filterProps(e),be=R(re.filterProps(e),["modelValue"]),Pe=R(oe.filterProps(e),["modelValue"]),z={header:u.value,transition:f.value};return s(de,D(g,{class:["v-date-picker",`v-date-picker--${r.value}`,{"v-date-picker--show-week":e.showWeek},e.class],style:e.style}),{title:()=>{var P;return((P=a.title)==null?void 0:P.call(a))??s("div",{class:"v-date-picker__title"},[k(e.title)])},header:()=>a.header?s(H,{defaults:{VDatePickerHeader:{...z}}},{default:()=>{var P;return[(P=a.header)==null?void 0:P.call(a,z)]}}):s(le,D({key:"header"},M,z,{onClick:r.value!=="month"?U:void 0}),{...a,default:void 0}),default:()=>s(Fe,null,[s(ne,D(x,{disabled:y.value,text:v.value,"onClick:next":B,"onClick:prev":I,"onClick:month":O,"onClick:year":K}),null),s(Xe,{hideOnLeave:!0},{default:()=>[r.value==="months"?s(re,D({key:"date-picker-months"},be,{modelValue:d.value,"onUpdate:modelValue":P=>d.value=P,min:h.value,max:c.value}),null):r.value==="year"?s(oe,D({key:"date-picker-years"},Pe,{modelValue:n.value,"onUpdate:modelValue":P=>n.value=P,min:h.value,max:c.value}),null):s(se,D({key:"date-picker-month"},F,{modelValue:i.value,"onUpdate:modelValue":P=>i.value=P,month:d.value,"onUpdate:month":P=>d.value=P,year:n.value,"onUpdate:year":P=>n.value=P,min:h.value,max:c.value}),null)]})]),actions:a.actions})}),{}}}),da={__name:"ExamDateDetailUpsert",setup(e){const l=ke();ze();const o=localStorage.getItem("id"),a=X({date:"",is_active:!1}),t=X({}),k=localStorage.getItem("token"),i=_(""),r=_(""),m=_(!1),d=_(null),n=_(null),b=async h=>{try{const c=await q.get(`https://gateway.berkompeten.com/api/admin/master/exam-date/detail?id=${h}`,{headers:{Authorization:`Bearer ${k}`}});if(Object.assign(a,c.data.data),a.date){const y=new Date(a.date);d.value=y.toISOString().substr(0,10),n.value=y.toISOString().substr(11,5)}}catch(c){console.error("Error fetching exam date data:",c),r.value="Failed to fetch exam date data."}},u=async()=>{try{f(),await q({method:"post",url:"https://gateway.berkompeten.com/api/admin/master/exam-date/upsert",data:a,headers:{Authorization:`Bearer ${k}`}}),i.value="Exam Date saved successfully!",setTimeout(()=>{v(),l.push("/exam-date-management")},2e3)}catch(h){console.error("Error submitting form:",h),h.response&&h.response.data?h.response.status===500?r.value=h.response.data.message||"An error occurred while saving. Please try again.":h.response.data.error?Object.assign(t,h.response.data.message):r.value="An error occurred while saving. Please try again.":r.value="An error occurred while saving. Please try again."}},v=()=>{Object.assign(a,{date:"",is_active:!1}),d.value=null,n.value=null,t.value={},i.value="",r.value=""},f=()=>{if(d.value&&n.value){const h=new Date(`${d.value}T${n.value}`);a.date=h.toISOString(),m.value=!1}};return J(()=>{o?b(o):localStorage.removeItem("id")}),(h,c)=>(j(),E(G,null,{default:V(()=>[s($,{cols:"12"},{default:V(()=>[s(Ge,{title:"Exam Date Details"},{default:V(()=>[s(ae,null,{default:V(()=>[s(Je,{onSubmit:Le(u,["prevent"])},{default:V(()=>[s(G,null,{default:V(()=>[s($,{cols:"12"},{default:V(()=>[s(Ke,{ref_key:"menu",ref:m,modelValue:m.value,"onUpdate:modelValue":c[4]||(c[4]=y=>m.value=y),"close-on-content-click":!1,transition:"scale-transition","offset-y":"","max-width":"290px","min-width":"auto"},{activator:V(({on:y,attrs:B})=>[s(Ze,D({modelValue:d.value.value,"onUpdate:modelValue":c[0]||(c[0]=I=>d.value.value=I),label:"Date",readonly:""},B,qe(y),{"error-messages":t.date,onClick:c[1]||(c[1]=I=>m.value.value=!0)}),null,16,["modelValue","error-messages"])]),default:V(()=>[s(ia,{modelValue:d.value.value,"onUpdate:modelValue":c[2]||(c[2]=y=>d.value.value=y),"no-title":"",scrollable:"",onChange:c[3]||(c[3]=y=>m.value.value=!1)},null,8,["modelValue"])]),_:1},8,["modelValue"])]),_:1}),s($,{cols:"12"},{default:V(()=>[s(ta,{color:"#0080ff",modelValue:a.is_active,"onUpdate:modelValue":c[5]||(c[5]=y=>a.is_active=y),"error-messages":t.is_active,label:"Is Active"},null,8,["modelValue","error-messages"])]),_:1}),s($,{cols:"12",class:"d-flex flex-wrap gap-4"},{default:V(()=>[s(C,{type:"submit",color:"#0080ff"},{default:V(()=>[T("Save")]),_:1}),s(C,{onClick:v,color:"secondary",variant:"outlined"},{default:V(()=>[T("Reset")]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),s(ae,null,{default:V(()=>[i.value?(j(),E(te,{key:0,type:"success",dismissible:"","onClick:close":c[6]||(c[6]=y=>i.value="")},{default:V(()=>[T(Z(i.value),1)]),_:1})):ee("",!0),r.value?(j(),E(te,{key:1,type:"error",dismissible:"","onClick:close":c[7]||(c[7]=y=>r.value="")},{default:V(()=>[T(Z(r.value),1)]),_:1})):ee("",!0)]),_:1})]),_:1})]),_:1})]),_:1}))}},Sa={__name:"exam-date-detail",setup(e){const l=localStorage.getItem("token"),o=_(null),a=ke();return J(async()=>{if(l)try{const t=await q.get("https://gateway.berkompeten.com/api/admin/profile",{headers:{Authorization:`Bearer ${l}`}});o.value=t.data}catch(t){t.response&&t.response.status===401&&a.push("/login")}else a.push("/login")}),(t,k)=>(j(),E(G,{class:"match-height"},{default:V(()=>[s($,{cols:"12",md:"12"},{default:V(()=>[s(da)]),_:1})]),_:1}))}};export{Sa as default};
